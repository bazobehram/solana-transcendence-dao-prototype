console.log("Polyfills loading...");console.log("Initial crypto:",typeof globalThis.crypto);console.log("Initial require:",typeof globalThis.require);typeof globalThis.require>"u"&&(globalThis.require=e=>{switch(e){case"crypto":return globalThis.crypto||{getRandomValues:r=>{for(let n=0;n<r.length;n++)r[n]=Math.floor(Math.random()*256);return r},randomBytes:r=>{let n=new Uint8Array(r);for(let t=0;t<r;t++)n[t]=Math.floor(Math.random()*256);return n}};case"buffer":return{Buffer:globalThis.Buffer};case"process":return globalThis.process;case"util":return globalThis.util;case"os":return globalThis.os;case"events":return globalThis.events;case"stream":return globalThis.stream;case"path":return globalThis.path;case"assert":return{ok:(r,n)=>{if(!r)throw new Error(n||"Assertion failed")},equal:(r,n,t)=>{if(r!==n)throw new Error(t||`Expected ${n}, got ${r}`)},deepEqual:(r,n,t)=>{if(JSON.stringify(r)!==JSON.stringify(n))throw new Error(t||"Deep equality failed")}};default:throw console.warn(`Module '${e}' is not available in browser context. Consider using browser-compatible alternatives.`),new Error(`Module '${e}' is not available in browser context. Use browser-compatible alternatives.`)}});typeof window.require>"u"&&(window.require=globalThis.require);typeof globalThis.__require>"u"&&(globalThis.__require=globalThis.require);typeof window.__require>"u"&&(window.__require=globalThis.require);var i=globalThis.Buffer||{from:(e,r)=>{if(typeof e=="string"){let n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}return Array.isArray(e)?new Uint8Array(e):new Uint8Array(e)},alloc:e=>new Uint8Array(e),allocUnsafe:e=>new Uint8Array(e),isBuffer:e=>e instanceof Uint8Array,concat:(e,r)=>{if(e.length===0)return new Uint8Array(0);if(e.length===1)return e[0];let n=r||e.reduce((a,o)=>a+o.length,0),t=new Uint8Array(n),s=0;for(let a of e)t.set(a,s),s+=a.length;return t}};globalThis.global=globalThis;globalThis.Buffer=i;globalThis.process={env:{DEBUG:void 0},version:"",nextTick:e=>setTimeout(e,0),browser:!0,cwd:()=>"/",chdir:()=>{},umask:()=>0,hrtime:()=>[0,0],platform:"browser",arch:"x64",argv:[],execPath:"",pid:1,ppid:1,title:"browser",stderr:{write:()=>{}},stdout:{write:()=>{}},stdin:{read:()=>null},versions:{node:"16.0.0"},exit:()=>{},kill:()=>{},on:()=>{},once:()=>{},off:()=>{},emit:()=>{},prependListener:()=>{},removeListener:()=>{},removeAllListeners:()=>{},setMaxListeners:()=>{},getMaxListeners:()=>10,listeners:()=>[],rawListeners:()=>[],listenerCount:()=>0,eventNames:()=>[]};window.global=globalThis;window.Buffer=i;window.process=globalThis.process;globalThis.util={inherits:(e,r)=>{e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},isBuffer:e=>e instanceof i,isArray:Array.isArray,isString:e=>typeof e=="string",isObject:e=>e!==null&&typeof e=="object",isFunction:e=>typeof e=="function",isUndefined:e=>e===void 0,isNull:e=>e===null,isNullOrUndefined:e=>e==null,isNumber:e=>typeof e=="number",isBoolean:e=>typeof e=="boolean",isRegExp:e=>e instanceof RegExp,isDate:e=>e instanceof Date,isError:e=>e instanceof Error,inspect:e=>JSON.stringify(e,null,2),format:(e,...r)=>{let n=0;return e.replace(/%[sdj%]/g,t=>{if(t==="%%")return"%";if(n>=r.length)return t;switch(t){case"%s":return String(r[n++]);case"%d":return String(Number(r[n++]));case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return t}})}};globalThis.os={platform:()=>"browser",arch:()=>"x64",release:()=>"1.0.0",type:()=>"Browser",endianness:()=>"LE",hostname:()=>"localhost",tmpdir:()=>"/tmp",homedir:()=>"/home/user",userInfo:()=>({username:"user",uid:1e3,gid:1e3,shell:"/bin/bash",homedir:"/home/user"}),cpus:()=>[{model:"Browser CPU",speed:2e3,times:{user:0,nice:0,sys:0,idle:0,irq:0}}],totalmem:()=>1024*1024*1024,freemem:()=>512*1024*1024,loadavg:()=>[.5,.5,.5],uptime:()=>3600,networkInterfaces:()=>({}),EOL:`
`};globalThis.crypto||(globalThis.crypto={getRandomValues:e=>{for(let r=0;r<e.length;r++)e[r]=Math.floor(Math.random()*256);return e},randomBytes:e=>{let r=new Uint8Array(e);for(let n=0;n<e;n++)r[n]=Math.floor(Math.random()*256);return r}});if(globalThis.crypto&&!globalThis.crypto.randomBytes)try{Object.defineProperty(globalThis.crypto,"randomBytes",{value:e=>{let r=new Uint8Array(e);return globalThis.crypto.getRandomValues(r),r},writable:!0,configurable:!0})}catch{console.warn("Cannot modify native crypto object, creating separate crypto polyfill"),globalThis.cryptoPolyfill={...globalThis.crypto,randomBytes:r=>{let n=new Uint8Array(r);return globalThis.crypto.getRandomValues(n),n}}}globalThis.events={EventEmitter:class{_events={};on(r,n){return this._events[r]||(this._events[r]=[]),this._events[r].push(n),this}once(r,n){let t=(...s)=>{this.off(r,t),n(...s)};return this.on(r,t)}off(r,n){return this._events[r]?(this._events[r]=this._events[r].filter(t=>t!==n),this):this}emit(r,...n){return this._events[r]?(this._events[r].forEach(t=>t(...n)),!0):!1}removeAllListeners(r){return r?delete this._events[r]:this._events={},this}}};globalThis.stream={Readable:class{readable=!0;read(){return null}pipe(r){return r}},Writable:class{writable=!0;write(){return!0}end(){return this}},Transform:class{readable=!0;writable=!0;read(){return null}write(){return!0}pipe(r){return r}}};globalThis.path={sep:"/",delimiter:":",join:(...e)=>e.join("/").replace(/\/+/g,"/"),resolve:(...e)=>"/"+e.join("/").replace(/\/+/g,"/"),dirname:e=>e.split("/").slice(0,-1).join("/")||"/",basename:e=>e.split("/").pop()||"",extname:e=>{let r=e.split("/").pop()||"",n=r.lastIndexOf(".");return n>0?r.substring(n):""},isAbsolute:e=>e.startsWith("/"),relative:(e,r)=>r,normalize:e=>e.replace(/\/+/g,"/")};console.log("Comprehensive polyfills loaded");
